angular.module("BrewMatic",["ui.router","angular-loading-bar"]).config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/home"),e.state("home",{url:"/home",templateUrl:"/html/home/index.html",controller:"homeController"}).state("tempLog",{url:"/tempLog",templateUrl:"/html/tempLog/index.html",controller:"tempLogController"}).state("about",{url:"/about",templateUrl:"/html/about/index.html",controller:"aboutController"})}]).config(["$httpProvider",function(e){e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT",e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.Pragma="no-cache"}]);var serviceBase="http://brewmaticwebapp.azurewebsites.net/api/";angular.module("BrewMatic").constant("ngAuthSettings",{apiServiceBaseUri:serviceBase,clientId:"ngAuthApp"}),angular.module("BrewMatic").controller("aboutController",["$scope","$window",function(e,t){"use strict";var r=this;r.loadData=function(){console.log("hello world. about")},r.loadData()}]),angular.module("BrewMatic").controller("homeController",["$scope","$window","$timeout","homeControllerService",function(e,t,r,o){"use strict";var a,n=this;n.loadLastLog=function(){o.getLastLog().then(function(t){e.lastLog=t})},n.updateIfNotChangedAfterNSeconds=function(e,t,n){a&&r.cancel(a),a=r(function(){o.saveTargetTemperature(e,t).then(function(e){console.log("Changes was saved")})},1e3*n)},n.loadData=function(){n.loadLastLog(),o.getTargetTemperature().then(function(t){e.targetTemperature=t,e.$watchGroup(["targetTemperature.target1","targetTemperature.target2"],function(e,t,r){var o=e[0],a=e[1],i=t[0],l=t[1];console.log({newTemp1:o,oldTemp1:i,newTemp2:a,oldTemp2:l}),o===i&&a===l||(console.log("Changes found"),o&&""!==o&&a&&""!==a&&(console.log("Input found"),console.log(angular.isNumber(parseFloat(o))),angular.isNumber(parseFloat(o))&&angular.isNumber(parseFloat(a))&&(console.log("Numeric input found"),n.updateIfNotChangedAfterNSeconds(o,a,3))))})})},n.loadData();var i=function(){r(function(){n.loadLastLog(),i()},1e3)};i()}]),angular.module("BrewMatic").service("homeControllerService",["$http","$q","ngAuthSettings","pageHelperService",function(e,t,r,o){"use strict";var a=this,n=r.apiServiceBaseUri;a.getLastLog=function(){return t(function(t,r){e.get(n+"brewStatusLog").success(function(e){t(e)}).error(o.handleError)})},a.getTargetTemperature=function(){return t(function(t,r){e.get(n+"targetTemperature").success(function(e){t(e)}).error(o.handleError)})},a.saveTargetTemperature=function(r,a){return t(function(t,i){e.post(n+"targetTemperature",{target1:r,target2:a}).success(function(e){t(e)}).error(o.handleError)})}}]),angular.module("BrewMatic").controller("tempLogController",["$scope","$window","tempLogService",function(e,t,r){"use strict";var o=this;o.loadData=function(){r.getBrewLogs().then(function(t){e.brewLogs=t})},o.loadData()}]),angular.module("BrewMatic").service("tempLogService",["$http","$q","ngAuthSettings","pageHelperService",function(e,t,r,o){"use strict";var a=this,n=r.apiServiceBaseUri;a.getBrewLogs=function(){return t(function(t,r){e.get(n+"brewStatusLog/get50latest").success(function(e){t(e)}).error(o.handleError)})}}]),angular.module("BrewMatic").service("pageHelperService",["$http","$q","$rootScope","ngAuthSettings",function(e,t,r,o){"use strict";var a=this;o.apiServiceBaseUri;a.handleError=function(e,t){if(console.log(e),e){if(404===t){r.errors=r.errors||[];var o="404: Url not found. ";throw{Message:o,ExceptionMessage:""}}throw e}},a.pushOkMessage=function(e){r.messages=r.messages||[],r.messages.push(e),setTimeout(function(){var t=r.messages.indexOf(e);r.messages.splice(t,1),r.$apply()},3e3)}}]),angular.module("BrewMatic").directive("decimalChanger",function(){return{restrict:"A",scope:{ngModel:"=",min:"@",max:"@"},link:function(e,t,r){Number.prototype.round=function(e){return e=e||10,parseFloat(this.toFixed(e))},e.changeTarget=function(t){var r=e.ngModel.round(1)+t;r>=e.min&&r<=e.max&&(e.ngModel+=t)}},templateUrl:"html/shared/decimalChangerlDirective/index.html"}});