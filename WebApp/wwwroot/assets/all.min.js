angular.module("BrewMatic",["ui.router","angular-loading-bar"]).config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/home"),e.state("home",{url:"/home",templateUrl:"/html/home/index.html",controller:"homeController"}).state("tempLog",{url:"/tempLog",templateUrl:"/html/tempLog/index.html",controller:"tempLogController"}).state("about",{url:"/about",templateUrl:"/html/about/index.html",controller:"aboutController"})}]).config(["$httpProvider",function(e){e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT",e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.Pragma="no-cache"}]);var serviceBase="http://localhost:5000/api/";angular.module("BrewMatic").constant("ngAuthSettings",{apiServiceBaseUri:serviceBase,clientId:"ngAuthApp"}),angular.module("BrewMatic").controller("aboutController",["$scope","$window",function(e,t){"use strict";var r=this;r.loadData=function(){console.log("hello world. about")},r.loadData()}]),angular.module("BrewMatic").service("pageHelperService",["$http","$q","$rootScope","ngAuthSettings",function(e,t,r,o){"use strict";var a=this;o.apiServiceBaseUri;a.handleError=function(e,t){if(e){if(404===t){r.errors=r.errors||[];var o="404: Url not found. ";throw{Message:o,ExceptionMessage:""}}throw e}},a.pushOkMessage=function(e){r.messages=r.messages||[],r.messages.push(e),setTimeout(function(){var t=r.messages.indexOf(e);r.messages.splice(t,1),r.$apply()},3e3)}}]),angular.module("BrewMatic").controller("homeController",["$scope","$window","$timeout","homeControllerService",function(e,t,r,o){"use strict";var a=this;a.loadLastLog=function(){o.getLastLog().then(function(t){e.lastLog=t})},a.updateIfNotChangedAfterNSeconds=function(e,t,a){n&&r.cancel(n),n=r(function(){o.saveTargetTemperature(e,t).then(function(e){console.log("Changes was saved")})},1e3*a)};var n;a.loadData=function(){a.loadLastLog(),o.getTargetTemperature().then(function(t){e.targetTemperature=t,e.$watchGroup(["targetTemperature.target1","targetTemperature.target2"],function(e,t,r){var o=e[0],n=e[1],l=t[0],i=t[1];console.log({newTemp1:o,oldTemp1:l,newTemp2:n,oldTemp2:i}),o===l&&n===i||(console.log("Changes found"),o&&""!==o&&n&&""!==n&&(console.log("Input found"),console.log(angular.isNumber(parseFloat(o))),angular.isNumber(parseFloat(o))&&angular.isNumber(parseFloat(n))&&(console.log("Numeric input found"),a.updateIfNotChangedAfterNSeconds(o,n,3))))})})},a.loadData();var l=function(){r(function(){a.loadLastLog(),l()},1e3)};l()}]),angular.module("BrewMatic").service("homeControllerService",["$http","$q","ngAuthSettings","pageHelperService",function(e,t,r,o){"use strict";var a=this,n=r.apiServiceBaseUri;a.getLastLog=function(){return t(function(t,r){e.get(n+"brewStatusLog").success(function(e){t(e)}).error(o.handleError)})},a.getTargetTemperature=function(){return t(function(t,r){e.get(n+"targetTemperature").success(function(e){t(e)}).error(o.handleError)})},a.saveTargetTemperature=function(r,a){return t(function(t,l){e.post(n+"targetTemperature",{target1:r,target2:a}).success(function(e){t(e)}).error(o.handleError)})}}]),angular.module("BrewMatic").controller("tempLogController",["$scope","$window","tempLogService",function(e,t,r){"use strict";var o=this;o.loadData=function(){r.getBrewLogs().then(function(t){e.brewLogs=t})},o.loadData()}]),angular.module("BrewMatic").service("tempLogService",["$http","$q","ngAuthSettings","pageHelperService",function(e,t,r,o){"use strict";var a=this,n=r.apiServiceBaseUri;a.getBrewLogs=function(){return t(function(t,r){e.get(n+"brewStatusLog/get50latest").success(function(e){t(e)}).error(o.handleError)})}}]),angular.module("BrewMatic").directive("decimalChanger",function(){return{restrict:"A",scope:{ngModel:"=",min:"@",max:"@"},link:function(e,t,r){Number.prototype.round=function(e){return e=e||10,parseFloat(this.toFixed(e))},e.changeTarget=function(t){var r=e.ngModel.round(1)+t;r>=e.min&&r<=e.max&&(e.ngModel+=t)}},templateUrl:"html/shared/decimalChangerlDirective/index.html"}});